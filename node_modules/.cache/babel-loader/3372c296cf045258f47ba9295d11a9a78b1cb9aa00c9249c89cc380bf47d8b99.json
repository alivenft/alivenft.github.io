{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import CryptoChart from'./CryptoChart';import Loading from'./Loading';import CurrencyConverter from'./CurrencyConverter';import CoinTable from'./CoinTable';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const intervals={'1h':'m1','24h':'h1','7d':'d1','1m':'d1','3m':'d1','1y':'d1'};const BitcoinPriceTracker=()=>{const[data,setData]=useState([]);const[interval,setInterval]=useState('1h');const[crypto,setCrypto]=useState('bitcoin');const[loading,setLoading]=useState(true);const[cryptoList,setCryptoList]=useState([]);useEffect(()=>{const fetchCryptoList=async()=>{try{const response=await axios.get('https://api.coincap.io/v2/assets');const enrichedCryptoList=await Promise.all(response.data.data.map(async crypto=>{const sparklineResponse=await axios.get(\"https://api.coincap.io/v2/assets/\".concat(crypto.id,\"/history?interval=h1\"));const sparkline=sparklineResponse.data.data.map(point=>parseFloat(point.priceUsd));return{...crypto,changePercent24Hr:parseFloat(crypto.changePercent24Hr),icon:\"https://assets.coincap.io/assets/icons/\".concat(crypto.symbol.toLowerCase(),\"@2x.png\"),sparkline};}));setCryptoList(enrichedCryptoList);}catch(error){console.error('Error fetching crypto list:',error);}};fetchCryptoList();},[]);useEffect(()=>{const calculateStartDate=interval=>{const now=Date.now();switch(interval){case'1y':return now-365*24*60*60*1000;case'3m':return now-90*24*60*60*1000;case'1m':return now-30*24*60*60*1000;case'7d':return now-7*24*60*60*1000;case'24h':return now-24*60*60*1000;default:return now-60*60*1000;}};const fetchCryptoData=async()=>{setLoading(true);try{const startDate=calculateStartDate(interval);const response=await axios.get(\"https://api.coincap.io/v2/assets/\".concat(crypto,\"/history\"),{params:{interval:intervals[interval],start:startDate,end:Date.now()}});const formattedData=response.data.data.map(point=>[new Date(point.time).getTime(),parseFloat(point.priceUsd)]);setData(formattedData);}catch(error){console.error(\"Error fetching data for \".concat(crypto,\":\"),error);}finally{setLoading(false);}};fetchCryptoData();},[interval,crypto]);return/*#__PURE__*/_jsx(\"div\",{className:\"outer-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"main-container text-center my-5\",children:[/*#__PURE__*/_jsx(CoinTable,{cryptoList:cryptoList,setCrypto:setCrypto}),/*#__PURE__*/_jsxs(\"div\",{id:\"crypto-details\",children:[/*#__PURE__*/_jsx(CurrencyConverter,{crypto:crypto}),loading?/*#__PURE__*/_jsx(Loading,{}):/*#__PURE__*/_jsx(CryptoChart,{data:data,interval:interval,setInterval:setInterval})]})]})});};export default BitcoinPriceTracker;","map":{"version":3,"names":["React","useState","useEffect","axios","CryptoChart","Loading","CurrencyConverter","CoinTable","jsx","_jsx","jsxs","_jsxs","intervals","BitcoinPriceTracker","data","setData","interval","setInterval","crypto","setCrypto","loading","setLoading","cryptoList","setCryptoList","fetchCryptoList","response","get","enrichedCryptoList","Promise","all","map","sparklineResponse","concat","id","sparkline","point","parseFloat","priceUsd","changePercent24Hr","icon","symbol","toLowerCase","error","console","calculateStartDate","now","Date","fetchCryptoData","startDate","params","start","end","formattedData","time","getTime","className","children"],"sources":["C:/Users/EL/Documents/GitHub/alivenft.github.io/src/components/BitcoinPriceTracker.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport CryptoChart from './CryptoChart';\r\nimport Loading from './Loading';\r\nimport CurrencyConverter from './CurrencyConverter';\r\nimport CoinTable from './CoinTable';\r\n\r\nconst intervals = {\r\n  '1h': 'm1',\r\n  '24h': 'h1',\r\n  '7d': 'd1',\r\n  '1m': 'd1',\r\n  '3m': 'd1',\r\n  '1y': 'd1',\r\n};\r\n\r\nconst BitcoinPriceTracker = () => {\r\n  const [data, setData] = useState([]);\r\n  const [interval, setInterval] = useState('1h');\r\n  const [crypto, setCrypto] = useState('bitcoin');\r\n  const [loading, setLoading] = useState(true);\r\n  const [cryptoList, setCryptoList] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const fetchCryptoList = async () => {\r\n      try {\r\n        const response = await axios.get('https://api.coincap.io/v2/assets');\r\n        const enrichedCryptoList = await Promise.all(\r\n          response.data.data.map(async (crypto) => {\r\n            const sparklineResponse = await axios.get(`https://api.coincap.io/v2/assets/${crypto.id}/history?interval=h1`);\r\n            const sparkline = sparklineResponse.data.data.map(point => parseFloat(point.priceUsd));\r\n            return {\r\n              ...crypto,\r\n              changePercent24Hr: parseFloat(crypto.changePercent24Hr),\r\n              icon: `https://assets.coincap.io/assets/icons/${crypto.symbol.toLowerCase()}@2x.png`,\r\n              sparkline,\r\n            };\r\n          })\r\n        );\r\n        setCryptoList(enrichedCryptoList);\r\n      } catch (error) {\r\n        console.error('Error fetching crypto list:', error);\r\n      }\r\n    };\r\n\r\n    fetchCryptoList();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const calculateStartDate = (interval) => {\r\n      const now = Date.now();\r\n      switch (interval) {\r\n        case '1y':\r\n          return now - 365 * 24 * 60 * 60 * 1000;\r\n        case '3m':\r\n          return now - 90 * 24 * 60 * 60 * 1000;\r\n        case '1m':\r\n          return now - 30 * 24 * 60 * 60 * 1000;\r\n        case '7d':\r\n          return now - 7 * 24 * 60 * 60 * 1000;\r\n        case '24h':\r\n          return now - 24 * 60 * 60 * 1000;\r\n        default:\r\n          return now - 60 * 60 * 1000;\r\n      }\r\n    };\r\n\r\n    const fetchCryptoData = async () => {\r\n      setLoading(true);\r\n      try {\r\n        const startDate = calculateStartDate(interval);\r\n        const response = await axios.get(\r\n          `https://api.coincap.io/v2/assets/${crypto}/history`,\r\n          {\r\n            params: {\r\n              interval: intervals[interval],\r\n              start: startDate,\r\n              end: Date.now(),\r\n            },\r\n          }\r\n        );\r\n        const formattedData = response.data.data.map((point) => [\r\n          new Date(point.time).getTime(),\r\n          parseFloat(point.priceUsd),\r\n        ]);\r\n        setData(formattedData);\r\n      } catch (error) {\r\n        console.error(`Error fetching data for ${crypto}:`, error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchCryptoData();\r\n  }, [interval, crypto]);\r\n\r\n  return (\r\n    <div className=\"outer-container\">\r\n      <div className=\"main-container text-center my-5\">\r\n        <CoinTable cryptoList={cryptoList} setCrypto={setCrypto} />\r\n        <div id=\"crypto-details\">\r\n          <CurrencyConverter crypto={crypto} />\r\n          {loading ? (\r\n            <Loading />\r\n          ) : (\r\n            <CryptoChart data={data} interval={interval} setInterval={setInterval} />\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BitcoinPriceTracker;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}