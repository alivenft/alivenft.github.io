{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import CryptoChart from'./CryptoChart';import LivePrice from'./LivePrice';import Loading from'./Loading';import{FaSearch,FaCaretDown}from'react-icons/fa';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const intervals={'1h':'m1','24h':'h1','7d':'d1','1m':'d1','3m':'d1','1y':'d1'};const BitcoinPriceTracker=()=>{const[data,setData]=useState([]);const[interval,setInterval]=useState('1h');const[crypto,setCrypto]=useState('bitcoin');const[loading,setLoading]=useState(true);const[cryptoList,setCryptoList]=useState([]);const[searchTerm,setSearchTerm]=useState('');const[showWarning,setShowWarning]=useState(false);useEffect(()=>{const fetchCryptoList=async()=>{try{const response=await axios.get('https://api.coincap.io/v2/assets');setCryptoList(response.data.data);}catch(error){console.error('Error fetching crypto list:',error);}};fetchCryptoList();},[]);useEffect(()=>{const fetchCryptoData=async()=>{setLoading(true);try{const startDate=interval==='1y'?Date.now()-365*24*60*60*1000:interval==='3m'?Date.now()-90*24*60*60*1000:interval==='1m'?Date.now()-30*24*60*60*1000:interval==='7d'?Date.now()-7*24*60*60*1000:interval==='24h'?Date.now()-24*60*60*1000:Date.now()-60*60*1000;const response=await axios.get(\"https://api.coincap.io/v2/assets/\".concat(crypto,\"/history\"),{params:{interval:intervals[interval],start:startDate,end:Date.now()}});const formattedData=response.data.data.map(point=>[new Date(point.time).getTime(),parseFloat(point.priceUsd)]);setData(formattedData);}catch(error){console.error('Error fetching data:',error);}finally{setLoading(false);}};fetchCryptoData();},[interval,crypto]);const handleSearch=()=>{const normalizedSearchTerm=searchTerm.toLowerCase();const matchedCrypto=cryptoList.find(crypto=>crypto.name.toLowerCase()===normalizedSearchTerm||crypto.symbol.toLowerCase()===normalizedSearchTerm);if(matchedCrypto){setCrypto(matchedCrypto.id);setShowWarning(false);}else{const closestMatch=cryptoList.find(crypto=>crypto.name.toLowerCase().includes(normalizedSearchTerm)||crypto.symbol.toLowerCase().includes(normalizedSearchTerm));if(closestMatch){setCrypto(closestMatch.id);}else{setShowWarning(true);setTimeout(()=>setShowWarning(false),5000);}}};const filteredCryptoList=cryptoList.filter(crypto=>crypto.name.toLowerCase().includes(searchTerm.toLowerCase())||crypto.symbol.toLowerCase().includes(searchTerm.toLowerCase()));return/*#__PURE__*/_jsxs(\"div\",{className:\"container text-center my-5\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"d-flex flex-column align-items-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center justify-content-center w-100\",children:[/*#__PURE__*/_jsx(LivePrice,{crypto:crypto}),/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-wrapper ml-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input-group mb-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control search-input\",placeholder:\"Search...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),style:{color:'white'}}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-dark search-btn\",onClick:handleSearch,children:/*#__PURE__*/_jsx(FaSearch,{})})]}),showWarning&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-warning small-alert\",children:\"Cryptocurrency not found\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"position-relative w-100\",children:[/*#__PURE__*/_jsxs(\"select\",{value:crypto,onChange:e=>setCrypto(e.target.value),className:\"form-select\",style:{width:'100%'},children:[filteredCryptoList.length===0&&/*#__PURE__*/_jsx(\"option\",{disabled:true,children:\"No cryptocurrencies found\"}),filteredCryptoList.map(crypto=>/*#__PURE__*/_jsxs(\"option\",{value:crypto.id,children:[crypto.name,\" (\",crypto.symbol.toUpperCase(),\")\"]},crypto.id))]}),/*#__PURE__*/_jsx(FaCaretDown,{className:\"dropdown-icon position-absolute top-50 end-0 translate-middle-y\"})]})]})]})}),loading?/*#__PURE__*/_jsx(Loading,{}):/*#__PURE__*/_jsx(CryptoChart,{data:data,interval:interval,setInterval:setInterval})]});};export default BitcoinPriceTracker;","map":{"version":3,"names":["React","useState","useEffect","axios","CryptoChart","LivePrice","Loading","FaSearch","FaCaretDown","jsx","_jsx","jsxs","_jsxs","intervals","BitcoinPriceTracker","data","setData","interval","setInterval","crypto","setCrypto","loading","setLoading","cryptoList","setCryptoList","searchTerm","setSearchTerm","showWarning","setShowWarning","fetchCryptoList","response","get","error","console","fetchCryptoData","startDate","Date","now","concat","params","start","end","formattedData","map","point","time","getTime","parseFloat","priceUsd","handleSearch","normalizedSearchTerm","toLowerCase","matchedCrypto","find","name","symbol","id","closestMatch","includes","setTimeout","filteredCryptoList","filter","className","children","type","placeholder","value","onChange","e","target","style","color","onClick","width","length","disabled","toUpperCase"],"sources":["C:/Users/EL/Documents/GitHub/alivenft.github.io/src/components/BitcoinPriceTracker.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport CryptoChart from './CryptoChart';\r\nimport LivePrice from './LivePrice';\r\nimport Loading from './Loading';\r\nimport { FaSearch, FaCaretDown } from 'react-icons/fa';\r\n\r\nconst intervals = {\r\n  '1h': 'm1',\r\n  '24h': 'h1',\r\n  '7d': 'd1',\r\n  '1m': 'd1',\r\n  '3m': 'd1',\r\n  '1y': 'd1',\r\n};\r\n\r\nconst BitcoinPriceTracker = () => {\r\n  const [data, setData] = useState([]);\r\n  const [interval, setInterval] = useState('1h');\r\n  const [crypto, setCrypto] = useState('bitcoin');\r\n  const [loading, setLoading] = useState(true);\r\n  const [cryptoList, setCryptoList] = useState([]);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [showWarning, setShowWarning] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const fetchCryptoList = async () => {\r\n      try {\r\n        const response = await axios.get('https://api.coincap.io/v2/assets');\r\n        setCryptoList(response.data.data);\r\n      } catch (error) {\r\n        console.error('Error fetching crypto list:', error);\r\n      }\r\n    };\r\n\r\n    fetchCryptoList();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const fetchCryptoData = async () => {\r\n      setLoading(true);\r\n      try {\r\n        const startDate = interval === '1y' ? Date.now() - 365 * 24 * 60 * 60 * 1000 :\r\n          interval === '3m' ? Date.now() - 90 * 24 * 60 * 60 * 1000 :\r\n          interval === '1m' ? Date.now() - 30 * 24 * 60 * 60 * 1000 :\r\n          interval === '7d' ? Date.now() - 7 * 24 * 60 * 60 * 1000 :\r\n          interval === '24h' ? Date.now() - 24 * 60 * 60 * 1000 :\r\n          Date.now() - 60 * 60 * 1000;\r\n\r\n        const response = await axios.get(\r\n          `https://api.coincap.io/v2/assets/${crypto}/history`,\r\n          {\r\n            params: {\r\n              interval: intervals[interval],\r\n              start: startDate,\r\n              end: Date.now(),\r\n            },\r\n          }\r\n        );\r\n        const formattedData = response.data.data.map(point => [new Date(point.time).getTime(), parseFloat(point.priceUsd)]);\r\n        setData(formattedData);\r\n      } catch (error) {\r\n        console.error('Error fetching data:', error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchCryptoData();\r\n  }, [interval, crypto]);\r\n\r\n  const handleSearch = () => {\r\n    const normalizedSearchTerm = searchTerm.toLowerCase();\r\n    const matchedCrypto = cryptoList.find(\r\n      crypto => crypto.name.toLowerCase() === normalizedSearchTerm || crypto.symbol.toLowerCase() === normalizedSearchTerm\r\n    );\r\n\r\n    if (matchedCrypto) {\r\n      setCrypto(matchedCrypto.id);\r\n      setShowWarning(false);\r\n    } else {\r\n      const closestMatch = cryptoList.find(\r\n        crypto => crypto.name.toLowerCase().includes(normalizedSearchTerm) || crypto.symbol.toLowerCase().includes(normalizedSearchTerm)\r\n      );\r\n      if (closestMatch) {\r\n        setCrypto(closestMatch.id);\r\n      } else {\r\n        setShowWarning(true);\r\n        setTimeout(() => setShowWarning(false), 5000);\r\n      }\r\n    }\r\n  };\r\n\r\n  const filteredCryptoList = cryptoList.filter(\r\n    crypto => \r\n      crypto.name.toLowerCase().includes(searchTerm.toLowerCase()) || \r\n      crypto.symbol.toLowerCase().includes(searchTerm.toLowerCase())\r\n  );\r\n\r\n  return (\r\n    <div className=\"container text-center my-5\">\r\n      <div className=\"d-flex flex-column align-items-center\">\r\n        <div className=\"d-flex align-items-center justify-content-center w-100\">\r\n          <LivePrice crypto={crypto} />\r\n          <div className=\"dropdown-wrapper ml-3\">\r\n            <div className=\"input-group mb-2\">\r\n              <input\r\n                type=\"text\"\r\n                className=\"form-control search-input\"\r\n                placeholder=\"Search...\"\r\n                value={searchTerm}\r\n                onChange={(e) => setSearchTerm(e.target.value)}\r\n                style={{ color: 'white' }}\r\n              />\r\n              <button className=\"btn btn-dark search-btn\" onClick={handleSearch}>\r\n                <FaSearch />\r\n              </button>\r\n            </div>\r\n            {showWarning && <div className=\"alert alert-warning small-alert\">Cryptocurrency not found</div>}\r\n            <div className=\"position-relative w-100\">\r\n              <select \r\n                value={crypto} \r\n                onChange={(e) => setCrypto(e.target.value)} \r\n                className=\"form-select\"\r\n                style={{ width: '100%' }}\r\n              >\r\n                {filteredCryptoList.length === 0 && (\r\n                  <option disabled>No cryptocurrencies found</option>\r\n                )}\r\n                {filteredCryptoList.map(crypto => (\r\n                  <option key={crypto.id} value={crypto.id}>\r\n                    {crypto.name} ({crypto.symbol.toUpperCase()})\r\n                  </option>\r\n                ))}\r\n              </select>\r\n              <FaCaretDown className=\"dropdown-icon position-absolute top-50 end-0 translate-middle-y\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {loading ? <Loading /> : <CryptoChart data={data} interval={interval} setInterval={setInterval} />}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BitcoinPriceTracker;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}